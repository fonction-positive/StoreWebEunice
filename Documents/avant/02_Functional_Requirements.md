# 功能需求规格说明书 (Functional Requirements)

## 1. 用户端功能模块

### 1.1 用户系统
- **注册**：
  - 支持邮箱或手机号注册。
  - 必填项校验（用户名、密码强度、邮箱格式）。
  - 注册成功后自动登录或跳转登录页。
- **登录**：
  - 账号密码登录。
  - 登录成功返回 JWT Token（Access + Refresh）。
  - 记住我功能（本地存储 Token）。
- **个人中心**：
  - **基本信息**：查看和修改昵称、头像（上传图片）、邮箱。
  - **收货地址管理**：新增、编辑、删除收货地址，设置默认地址。
  - **安全设置**：修改登录密码。

### 1.2 商品浏览
- **首页/分类页**：
  - 展示商品分类导航（如：手机壳、贴膜、充电线）。
  - 商品列表展示（缩略图、名称、价格）。
  - **筛选与排序**：按价格（高低）、销量、上架时间排序；按品牌、材质筛选。
- **商品详情页**：
  - 展示商品高清大图（轮播）。
  - 显示商品名称、描述、价格、当前库存。
  - 规格选择（如颜色、型号）。
- **搜索功能**：
  - 顶部搜索栏，支持关键词模糊搜索商品名称和描述。

### 1.3 购物车
- **添加商品**：从详情页将商品加入购物车，选择数量和规格。
- **购物车管理**：
  - 列表展示购物车内商品。
  - 修改购买数量（增加/减少）。
  - 删除购物车内商品。
  - 选中/取消选中商品进行结算。
  - 实时计算选中商品总价。

### 1.4 订单系统
- **下单流程**：
  1. **确认订单页**：展示已选商品、选择收货地址、选择支付方式（模拟）、显示运费和总金额。
  2. **提交订单**：生成订单记录，扣减库存（或支付后扣减，视业务逻辑定，建议下单预占库存）。
  3. **模拟支付**：点击“支付”按钮，模拟支付成功回调，更新订单状态为“已支付”。
- **订单管理**：
  - **订单列表**：按状态筛选（全部、待支付、待发货、待收货、已完成）。
  - **订单详情**：查看订单号、下单时间、商品清单、收货信息、支付金额、物流状态。
  - **取消订单**：在“待支付”或“待发货”状态下可取消订单。
  - **确认收货**：用户收到货后手动确认，订单状态变为“已完成”。

---

## 2. 管理员端功能模块

### 2.1 管理员登录
- 独立的管理员登录入口（或通过普通登录识别角色跳转）。
- 必须具备管理员权限才能进入后台管理系统。

### 2.2 商品管理
- **商品列表**：表格展示所有商品，支持按分类、名称搜索。
- **新增商品**：
  - 填写商品名称、描述、原价、售价、库存。
  - 选择分类。
  - 上传商品主图和轮播图。
- **编辑商品**：修改上述所有信息。
- **删除/下架商品**：软删除或标记为下架状态，用户端不可见。
- **库存管理**：快速调整商品库存数量。

### 2.3 订单管理
- **订单列表**：查看平台所有订单，支持按订单号、用户名、状态筛选。
- **订单详情**：查看订单详细信息。
- **状态流转**：
  - **发货**：对“待发货”订单填写物流单号（可选），操作发货，状态更为“已发货”。
  - **取消订单**：管理员可强制取消异常订单。

### 2.4 用户管理
- **用户列表**：查看注册用户列表（ID、用户名、邮箱、注册时间、状态）。
- **用户封禁**：对违规用户进行禁用（Active=False），禁用后用户无法登录。
- **解封**：恢复用户登录权限。

### 2.5 数据统计 (Dashboard)
- **核心指标**：
  - 今日/本月销售额。
  - 今日/本月订单量。
  - 新增用户数。
- **图表展示** (可选扩展)：
  - 销量趋势图 (折线图)。
  - 热销商品排行 (柱状图)。
  - 订单状态分布 (饼图)。

---

## 3. 业务流程图 (简述)

### 3.1 购物流程
`浏览商品` -> `加入购物车` -> `去结算` -> `选择地址` -> `提交订单` -> `支付` -> `等待发货` -> `确认收货`

### 3.2 发货流程
`用户下单` -> `管理员查看待发货订单` -> `核实库存/打包` -> `管理员点击发货` -> `系统更新状态` -> `用户收到发货通知`
