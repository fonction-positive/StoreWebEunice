# 项目概述 (Project Overview)

## 1. 项目基本信息
- **项目名称**：轻量化手机配件销售网站 (Lightweight Mobile Accessory Sales Website)
- **项目代号**：StoreWeb
- **文档版本**：V1.0.0
- **最后更新日期**：2025-11-25

## 2. 项目目标
本项目旨在构建一个轻量级、功能完整且易于扩展的手机配件电商平台。项目采用前后端分离架构（但部署为同一系统），通过角色权限控制区分普通用户端和管理员端。目标是快速实现核心电商功能，提供流畅的用户体验，并为后续功能扩展（如推荐系统、数据分析）奠定坚实基础。

## 3. 项目背景和意义
随着智能手机的普及，手机配件市场需求持续增长。为了满足小型商家或个人创业者快速搭建自有品牌销售渠道的需求，开发一套轻量化、低成本、易维护的电商系统显得尤为重要。
- **背景**：现有大型电商平台入驻成本高，通用SaaS模板个性化能力弱。
- **意义**：提供一套自主可控、技术栈现代、易于二次开发的电商解决方案，帮助商家建立私域流量，提升品牌形象。

## 4. 用户群体与使用场景
### 4.1 用户群体
- **普通消费者**：购买手机壳、贴膜、充电器等配件的个人用户。
- **系统管理员**：负责商品上架、订单处理、用户管理的运营人员。

### 4.2 使用场景
- **用户端**：用户通过浏览器访问网站，浏览商品分类，搜索特定型号配件，加入购物车，完成下单支付，并查看物流状态。
- **管理端**：管理员登录后台，查看今日销量，处理待发货订单，上架新款商品，下架缺货商品，封禁违规用户。

## 5. 核心价值与功能定位
- **轻量化**：去除冗余功能，专注于核心购物流程，保证系统高性能和低资源占用。
- **统一性**：前后端共用一套代码库和部署环境，降低维护成本。
- **安全性**：基于JWT的身份认证和严格的权限控制，保障数据安全。
- **扩展性**：模块化设计，方便接入第三方支付、物流查询或扩展为移动端APP。

## 6. 系统规模
- **初期规模**：支持单机部署，满足日均PV 1000+，SKU 500+ 的业务需求。
- **架构设计**：支持通过Docker容器化进行水平扩展，数据库支持读写分离配置。

---

# 技术栈 (Technology Stack)

## 1. 前端技术
- **核心框架**：Vue 3 (Composition API)
- **UI 组件库**：Element Plus (响应式设计，适配桌面端)
- **状态管理**：Pinia (轻量级状态管理)
- **路由管理**：Vue Router (支持动态路由和权限守卫)
- **HTTP 客户端**：Axios (封装请求拦截器，处理JWT)
- **构建工具**：Vite (极速构建)

## 2. 后端技术
- **核心框架**：Python Django 4.x / 5.x
- **API 框架**：Django REST Framework (DRF)
- **认证机制**：Simple JWT (JSON Web Token)
- **ORM**：Django ORM

## 3. 数据库与存储
- **关系型数据库**：PostgreSQL (推荐 13+)
- **缓存系统** (可选)：Redis (用于缓存热点数据、Session、Celery消息队列)
- **文件存储**：
  - 开发环境：本地文件系统 (Local Media Storage)
  - 生产环境：兼容 S3 的云存储 (如 AWS S3, 阿里云 OSS) 或 Nginx 托管本地文件

## 4. 安全方案
- **身份认证**：JWT (Access Token + Refresh Token)
- **密码存储**：PBKDF2 (Django 默认加密算法)
- **防护机制**：
  - SQL 注入防护 (ORM 自动处理)
  - XSS 防护 (Vue 自动转义 + Django 模板/API 清洗)
  - CSRF 防护 (API 层面主要依赖 JWT，Cookie 需设置 HttpOnly/Secure)
  - 接口限流 (DRF Throttling)

## 5. 部署方案
- **Web 服务器**：Nginx (反向代理、静态资源服务)
- **应用服务器**：Gunicorn 或 uWSGI
- **容器化**：Docker + Docker Compose
- **协议**：HTTPS (Let's Encrypt SSL 证书)

---

# 用户角色和权限 (Roles & Permissions)

## 1. 角色定义
系统主要包含两类角色，通过数据库 `User` 表中的 `role` 字段或 `is_staff`/`is_superuser` 字段进行区分。

| 角色 | 标识 | 说明 |
| :--- | :--- | :--- |
| **普通用户 (User)** | `role='user'` | 系统的最终消费者，拥有购买权限。 |
| **管理员 (Admin)** | `role='admin'` | 系统的运营管理者，拥有后台管理权限。 |

## 2. 权限矩阵

| 功能模块 | 功能点 | 普通用户权限 | 管理员权限 |
| :--- | :--- | :--- | :--- |
| **用户系统** | 注册/登录 | ✅ | ✅ |
| | 修改个人信息 | ✅ (仅自己) | ✅ (可管理所有用户) |
| | 封禁/解封用户 | ❌ | ✅ |
| **商品系统** | 浏览/搜索商品 | ✅ | ✅ |
| | 查看商品详情 | ✅ | ✅ |
| | 新增/编辑/删除商品 | ❌ | ✅ |
| | 上传商品图片 | ❌ | ✅ |
| | 调整库存 | ❌ | ✅ |
| **购物车** | 添加/删除/修改数量 | ✅ (仅自己) | ❌ (不参与购物) |
| **订单系统** | 创建订单 (下单) | ✅ | ❌ (管理员不下单) |
| | 查看订单列表 | ✅ (仅自己) | ✅ (所有订单) |
| | 修改订单状态 | ✅ (仅取消/确认收货) | ✅ (发货/取消/完成) |
| **数据统计** | 查看销售报表 | ❌ | ✅ |

## 3. 权限控制实现
- **前端控制**：
  - **路由守卫 (Router Guards)**：根据用户 Token 中的角色信息，拦截非管理员访问 `/admin/*` 路由。
  - **指令/组件控制**：使用 `v-if` 或自定义指令 `v-permission` 隐藏无权限的操作按钮 (如“编辑商品”按钮对普通用户不可见)。
- **后端控制**：
  - **API 权限类 (DRF Permissions)**：
    - `IsAuthenticated`: 需登录。
    - `IsAdminUser`: 仅管理员。
    - `IsOwnerOrAdmin`: 仅资源拥有者或管理员 (如查看订单详情)。
